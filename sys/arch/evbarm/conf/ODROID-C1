#
#	$NetBSD: ODROID-C1,v 1.24 2018/10/18 09:01:53 skrll Exp $
#
#	Hardkernel ODROID-C1 (Amlogic S805) based SBC (Single Board Computer)
#

include	"arch/evbarm/conf/std.amlogic"
include "arch/evbarm/conf/files.amlogic"
include	"arch/evbarm/conf/GENERIC.common"

#
# FDT files supported by this kernel - add to DTSSUBDIR and DTS as
# appropriate
#
makeoptions 	DTSARCH="arm"
makeoptions 	DTSGNUARCH="arm"
makeoptions 	DTSSUBDIR="amlogic"
makeoptions 	DTS="
	meson8b-mxq.dts
	meson8b-odroidc1.dts
"

options 	CPU_CORTEXA5
options 	MULTIPROCESSOR

options 	SOC_MESON8B

#options 	DIAGNOSTIC
#options 	DEBUG
#options 	LOCKDEBUG
makeoptions	DEBUG="-g"	# compile full symbol table
makeoptions	COPY_SYMTAB=1
#options 	VERBOSE_INIT_ARM

# ODROID-C1
options 	EARLYCONS=meson, CONSADDR=0xc81004c0
options 	CONSPEED=115200

pseudo-device 	openfirm	# /dev/openfirm

config		netbsd		root on ? type ?

# Device tree support
armfdt0		at root
simplebus*	at fdt? pass 0

# CPUs
cpus*		at fdt? pass 0
cpu*		at fdt? pass 0

# Clock and reset controllers
meson8bclkc*	at fdt? pass 2		# Amlogic Meson8b clock controller
mesonresets*	at fdt? pass 2		# Amlogic Meson misc. clock resets

#a9wdt0 	at armperiph?			# Watchdog

# Timer
a9tmr* 		at fdt? pass 2		# ARM Cortex A5/A9 Timer
arma9tmr* 	at a9tmr?

# Interrupt controller
gic*		at fdt? pass 1		# ARM GIC
armgic0		at gic?

# Level 2 Cache Controller
l2cc* 		at fdt? pass 2		# ARM Cortex A9 L2 Cache Controller
arml2cc* 	at l2cc?

fclock*		at fdt? pass 1
ffclock*	at fdt? pass 1
fregulator*	at fdt? pass 5
gregulator*	at fdt? pass 4
gpiokeys*	at fdt?
wskbd*		at gpiokeys? console ? mux 1
gpioleds*	at fdt?

# On-board UARTs
mesonuart*	at fdt?			# Amlogic Meson UART

# GPIO controller
mesonpinctrl*	at fdt? pass 2		# Amlogic Meson GPIO

# SDMMC
mesonsdio*	at fdt?			# Amlogic Meson SDIO controller
sdmmc*		at sdmmcbus?
ld0		at sdmmc0
ld1		at sdmmc1
ld2		at sdmmc2
ld3		at sdmmc3
ld*		at sdmmc?

# Framebuffer
#genfb0		at amlogicio0
#wsdisplay*	at genfb?
options 	VCONS_DRAW_INTR
options 	WSEMUL_VT100
options 	WS_DEFAULT_FG=WSCOL_WHITE
options 	WS_DEFAULT_BG=WSCOL_BLACK
options 	WS_KERNEL_FG=WSCOL_GREEN
options 	WS_KERNEL_BG=WSCOL_BLACK
options 	WSDISPLAY_COMPAT_PCVT
options 	WSDISPLAY_COMPAT_SYSCONS
options 	WSDISPLAY_COMPAT_USL
options 	WSDISPLAY_COMPAT_RAWKBD
options 	WSDISPLAY_DEFAULTSCREENS=4
pseudo-device	wsmux
pseudo-device	wsfont

# Hardware random number generator
mesonrng*	at fdt?			# Amlogic Meson RNG

# Real-time clock
#amlogicrtc0	at amlogicio0

# Gigabit ethernet
awge*		at fdt?			# Allwinner Gigabit Ethernet (GMAC)
rgephy*		at mii? phy ?
ukphy*		at mii? phy ?

# USB
mesonusbphy*	at fdt? pass 9		# Amlogic Meson USB2 PHY
dwctwo*		at fdt?			# Designware USB DRD
usb*		at dwctwo?
include "dev/usb/usbdevices.config"

midi*		at midibus?

cinclude "arch/evbarm/conf/ODROID-C1.local"
